# Domain-Driven Design (DDD)

## Теоретическая часть: Что такое Domain-Driven Design?
Domain-Driven Design (DDD) — это подход к разработке программного обеспечения, который фокусируется на моделировании бизнес-домена и создании программных абстракций, которые отражают бизнес-модель. DDD был предложен Эриком Эвансом в его книге "Domain-Driven Design: Tackling Complexity in the Heart of Software" (2003).

### Основные концепции DDD

#### 1. Единый язык (Ubiquitous Language)
Единый язык — это общий язык, используемый как разработчиками, так и экспертами в предметной области. Он помогает устранить недопонимание между техническими и бизнес-специалистами.
**Пример**: Вместо использования технических терминов вроде "Entity" или "Repository", мы используем термины из бизнес-домена, такие как "Покупатель", "Автомобиль", "Продажа".

#### 2. Ограниченный контекст (Bounded Context)
Ограниченный контекст — это граница, внутри которой определенная модель имеет конкретное значение. Разные контексты могут иметь разные модели для одних и тех же понятий.
**Пример**: Понятие "Клиент" в контексте продаж может отличаться от понятия "Клиент" в контексте бухгалтерии.

#### 3. Предметная область (Domain)
Предметная область — это сфера знаний, деятельности или интересов, к которой относится разрабатываемое приложение.
**Пример**: В нашем проекте предметная область — это продажа автомобилей.

#### 4. Модель предметной области (Domain Model)
Модель предметной области — это абстракция, которая описывает выбранные аспекты предметной области и может использоваться для решения проблем, связанных с этой предметной областью.
**Пример**: В нашем проекте модель включает в себя понятия "Покупатель", "Автомобиль", "Двигатель" и отношения между ними.

### Строительные блоки DDD

#### 1. Сущности (Entities)
Сущности — это объекты, которые имеют идентичность, не зависящую от их атрибутов. Две сущности могут быть равны, даже если их атрибуты различаются.
**Пример**: `Car` в нашем проекте является сущностью, так как имеет уникальный номер (идентификатор).

#### 2. Объекты-значения (Value Objects)
Объекты-значения — это объекты, которые не имеют идентичности и полностью определяются своими атрибутами.
**Пример**: В нашем проекте нет явных объектов-значений, но можно было бы ввести, например, `Address` для хранения адреса покупателя.

#### 3. Агрегаты (Aggregates)
Агрегат — это кластер объектов, которые рассматриваются как единое целое с точки зрения изменения данных. У каждого агрегата есть корень (Aggregate Root), через который осуществляется доступ к другим объектам агрегата.
**Пример**: В нашем проекте `Car` мог бы быть корнем агрегата, включающего в себя `Engine`.

#### 4. Репозитории (Repositories)
Репозиторий — это механизм для инкапсуляции хранения, поиска и извлечения объектов модели.
**Пример**: `CarService` и `CustomersStorage` в нашем проекте выполняют роль репозиториев.

#### 5. Сервисы предметной области (Domain Services)
Сервисы предметной области — это операции, которые не принадлежат ни к одной сущности или объекту-значению, но являются частью модели предметной области.
**Пример**: `HseCarService` в нашем проекте является сервисом предметной области, отвечающим за продажу автомобилей.

#### 6. Фабрики (Factories)
Фабрики — это объекты, отвечающие за создание сложных объектов или агрегатов.
**Пример**: `PedalCarFactory` и `HandCarFactory` в нашем проекте являются фабриками.

#### 7. События предметной области (Domain Events)
События предметной области — это объекты, которые фиксируют что-то, что произошло в предметной области.
**Пример**: В нашем проекте нет явных событий предметной области, но можно было бы ввести, например, `CarSoldEvent`.